Config              = {}
Config.MaxDistance = 4.5

Config.Sitable = {
	--Only verticalOffset works right now!
	--all scenarios: pastebin.com/6mrYTdQv
	
	-- BENCH
	{prop = 'v_res_fa_chair01', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_picnictable_01', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_picnictable_02', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_ilev_m_dinechair', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_bench_01a', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_bench_01b', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_bench_01c', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_bench_02', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_bench_03', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_bench_04', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_bench_05', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_bench_06', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_bench_05', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_bench_08', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_bench_09', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_bench_10', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_bench_11', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_fib_3b_bench', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_ld_bench01', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_wait_bench_01', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	
	-- CHAIR
	{prop = 'v_serv_ct_chair02', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -1.0, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'hei_prop_heist_off_chair', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'hei_prop_hei_skid_chair', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_chair_01a', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_chair_01b', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_chair_02', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_chair_03', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_chair_04a', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_chair_04b', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_chair_05', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_chair_06', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_chair_05', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_chair_08', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_chair_09', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_chair_10', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_chateau_chair_01', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_clown_chair', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_cs_office_chair', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_direct_chair_01', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_direct_chair_02', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_gc_chair02', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_off_chair_01', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_off_chair_03', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_off_chair_04', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_off_chair_04b', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_off_chair_04_s', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_off_chair_05', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_old_deck_chair', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_old_wood_chair', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_rock_chair_01', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_skid_chair_01', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_skid_chair_02', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_skid_chair_03', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_sol_chair', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_wheelchair_01', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_wheelchair_01_s', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'p_armchair_01_s', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'p_clb_officechair_s', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'p_dinechair_01_s', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'p_ilev_p_easychair_s', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'p_soloffchair_s', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'p_yacht_chair_01_s', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_club_officechair', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_corp_bk_chair3', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_corp_cd_chair', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_corp_offchair', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_ilev_chair02_ped', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_ilev_hd_chair', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_ilev_p_easychair', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_ret_gc_chair03', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_ld_farm_chair01', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_table_04_chr', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_table_05_chr', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_table_06_chr', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_ilev_leath_chr', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_table_01_chr_a', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_table_01_chr_b', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_table_02_chr', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_table_03b_chr', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_table_03_chr', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_torture_ch_01', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_ilev_fh_dineeamesa', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_ilev_fh_kitchenstool', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_ilev_tort_stool', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_ilev_fh_kitchenstool', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_ilev_fh_kitchenstool', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_ilev_fh_kitchenstool', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_ilev_fh_kitchenstool', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},

	-- SEAT
	{prop = 'hei_prop_yah_seat_01', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'hei_prop_yah_seat_02', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'hei_prop_yah_seat_03', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_waiting_seat_01', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_yacht_seat_01', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_yacht_seat_02', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_yacht_seat_03', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_hobo_seat_01', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.65, forwardOffset = 0.0, leftOffset = 0.0},

	-- COUCH
	{prop = 'prop_rub_couch01', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'miss_rub_couch_01', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_ld_farm_couch01', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_ld_farm_couch02', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_rub_couch02', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_rub_couch03', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_rub_couch04', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},

	-- SOFA
	{prop = 'p_lev_sofa_s', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'p_res_sofa_l_s', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'p_v_med_p_sofa_s', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'p_yacht_sofa_01_s', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_ilev_m_sofa', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_res_tre_sofa_s', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_tre_sofa_mess_a_s', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_tre_sofa_mess_b_s', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'v_tre_sofa_mess_c_s', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},

	-- MISC
	{prop = 'prop_roller_car_01', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'prop_roller_car_02', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -0.5, forwardOffset = 0.0, leftOffset = 0.0},
	{prop = 'ex_prop_offchair_exec_04', scenario = 'PROP_HUMAN_SEAT_BENCH', verticalOffset = -1.5, forwardOffset = 0.0, leftOffset = 0.0}
}

local Keys = {
	["ESC"] = 322, ["F1"] = 288, ["F2"] = 289, ["F3"] = 170, ["F5"] = 166, ["F6"] = 167, ["F7"] = 168, ["F8"] = 169, ["F9"] = 56, ["F10"] = 57, 
	["~"] = 243, ["1"] = 157, ["2"] = 158, ["3"] = 160, ["4"] = 164, ["5"] = 165, ["6"] = 159, ["7"] = 161, ["8"] = 162, ["9"] = 163, ["-"] = 84, ["="] = 83, ["BACKSPACE"] = 177, 
	["TAB"] = 37, ["Q"] = 44, ["W"] = 32, ["E"] = 38, ["R"] = 45, ["T"] = 245, ["Y"] = 246, ["U"] = 303, ["P"] = 199, ["["] = 39, ["]"] = 40, ["ENTER"] = 18,
	["CAPS"] = 137, ["A"] = 34, ["S"] = 8, ["D"] = 9, ["F"] = 23, ["G"] = 47, ["H"] = 74, ["K"] = 311, ["L"] = 182,
	["LEFTSHIFT"] = 21, ["Z"] = 20, ["X"] = 73, ["C"] = 26, ["V"] = 0, ["B"] = 29, ["N"] = 249, ["M"] = 244, [","] = 82, ["."] = 81,
	["LEFTCTRL"] = 36, ["LEFTALT"] = 19, ["SPACE"] = 22, ["RIGHTCTRL"] = 70, 
	["HOME"] = 213, ["PAGEUP"] = 10, ["PAGEDOWN"] = 11, ["DELETE"] = 178,
	["LEFT"] = 174, ["RIGHT"] = 175, ["TOP"] = 27, ["DOWN"] = 173,
	["NENTER"] = 201, ["N4"] = 108, ["N5"] = 60, ["N6"] = 107, ["N+"] = 96, ["N-"] = 97, ["N7"] = 117, ["N8"] = 61, ["N9"] = 118
}

local sitting = false
local lastPos = nil
local currentSitObj = nil



function headsUp(text)
	SetTextComponentFormat('STRING')
	AddTextComponentString(text)
	DisplayHelpTextFromStringLabel(0, 0, 1, -1)
end
local recentlysat = false

RegisterNetEvent('animation:Chair2');
AddEventHandler('animation:Chair2', function()
	local ped = PlayerPedId()
		if recentlysat or exports["isPed"]:isPed("disabled") or IsPedInAnyVehicle(PlayerPedId(), false) then
			return
		end
		recentlysat = true
	--	TaskStartScenarioAtPosition(ped, objinfo.scenario, objloc.x, objloc.y, objloc.z-objinfo.verticalOffset, GetEntityHeading(object)+180.0, 0, true, true)
		pos = GetEntityCoords(ped);
		head = GetEntityHeading(ped);

		local pos = GetOffsetFromEntityInWorldCoords(PlayerPedId(), 0.0, -0.65, 0.0)

		local chair = CreateObject( `prop_chair_01a`, pos.x, pos.y, pos.z, true, false, false)
		SetEntityHeading(chair,GetEntityHeading(ped))
		SetEntityCollision(chair,false,false)
		SetEntityCoords(chair, pos.x, pos.y, pos.z)

		SetEntityVisible(chair, false)
		TaskStartScenarioAtPosition(ped, 'PROP_HUMAN_SEAT_BENCH', pos.x, pos.y, pos.z-0.5, GetEntityHeading(chair), 0, true, true)
		sitting = true
		TriggerEvent("Fuckmylife2",chair,GetEntityHeading(chair))
		Citizen.Wait(4000)
		recentlysat = false
end)

RegisterNetEvent("Fuckmylife2")
AddEventHandler("Fuckmylife2", function(object,bearing)
	local ped = PlayerPedId()
	local posend = GetOffsetFromEntityInWorldCoords(object, 0.0, 0.0, 0.45)
	while sitting do
		AttachEntityToEntity(ped, object, 20, 0.0, 0.0, -0.5, 0.0, 0.0, 0.0, false, false, false, false, 1, true)
		SetEntityHeading(ped, bearing)
		Citizen.Wait(0)
		if IsControlJustReleased(1,96) then
			local pos = GetOffsetFromEntityInWorldCoords(object, 0.0, 0.0, 0.05)
			if pos.z < (posend.z+1) then
				SetEntityCoords(object, pos.x, pos.y, pos.z)
			end
		end
		if IsControlJustReleased(1,97) then
			local pos = GetOffsetFromEntityInWorldCoords(object, 0.0, 0.0, -0.05)
			if pos.z > (posend.z-1) then
				SetEntityCoords(object, pos.x, pos.y, pos.z)
			end
		end

 
		if IsControlJustReleased(1,61) then
			local pos = GetOffsetFromEntityInWorldCoords(object, 0.0, 0.05, 0.0)
			if pos.y < (posend.y+1) then
				SetEntityCoords(object, pos.x, pos.y, pos.z)
			end
		end
		if IsControlJustReleased(1,60) then
			local pos = GetOffsetFromEntityInWorldCoords(object, 0.0, -0.05, 0.0)
			if pos.y > (posend.y-1) then
				SetEntityCoords(object, pos.x, pos.y, pos.z)
			end
		end

		if IsControlJustReleased(1,107) then
			local pos = GetOffsetFromEntityInWorldCoords(object, 0.05, 0.0, 0.0)
			if pos.x < (posend.x+1) then
				SetEntityCoords(object, pos.x, pos.y, pos.z)
			end
		end
		if IsControlJustReleased(1,108) then
			local pos = GetOffsetFromEntityInWorldCoords(object, -0.05, 0.0, 0.0)
			if pos.x > (posend.x-1) then
				SetEntityCoords(object, pos.x, pos.y, pos.z)
			end
		end

	end

	if DoesEntityExist(object) then
		DeleteObject(object)
	end
end)	

RegisterNetEvent('animation:Chair');

AddEventHandler('animation:Chair', function()

	local objects = {}
	for k,v in pairs(Config.Sitable) do
		table.insert(objects, v.prop)
	end
	
	local ped = PlayerPedId()
	local list = {}
	for k,v in pairs(objects) do
		local obj = GetClosestObjectOfType(GetEntityCoords(ped).x, GetEntityCoords(ped).y, GetEntityCoords(ped).z, 3.0, GetHashKey(v), false, true ,true)
		local dist = #(GetEntityCoords(ped) - GetEntityCoords(obj))
		list[#list+1]= {object = obj, distance = dist, name = v}
	end

	local closest = list[1]
	for k,v in pairs(list) do
		if v.distance < closest.distance then
			closest = v
		end
	end

	local distance = closest.distance
	local object = closest.object
	local name = closest.name

	if distance < Config.MaxDistance and DoesEntityExist(object) then
		SetEntityInvincible(object, true)
		sit(object)
	end

end)

function quickmafs(dir)
	local x = 0.0
	local y = 0.0
	local dir = dir
	if dir >= 0.0 and dir <= 90.0 then
		local factor = (dir/9.2) / 10
		x = -1.0 + factor
		y = 0.0 - factor
	end

	if dir > 90.0 and dir <= 180.0 then
		dirp = dir - 90.0
		local factor = (dirp/9.2) / 10
		x = 0.0 + factor
		y = -1.0 + factor
	end

	if dir > 180.0 and dir <= 270.0 then
		dirp = dir - 180.0
		local factor = (dirp/9.2) / 10
		x = 1.0 - factor
		y = 0.0 + factor
	end

	if dir > 270.0 and dir <= 360.0 then
		dirp = dir - 270.0
		local factor = (dirp/9.2) / 10	
		x = 0.0 - factor
		y = 1.0 - factor
	end
	return x,y
end
RegisterNetEvent("startCoaster")
AddEventHandler("startCoaster",function(object)
	Citizen.Trace("Starting Coaster")

	FreezeEntityPosition(object, false)

	

	local coasterscript = "rollercoaster"
	RequestScript(coasterscript)

	while not HasScriptLoaded(coasterscript) do
		Citizen.Wait(0)
	end
	StartNewScript(coasterscript)
	SetScriptAsNoLongerNeeded(coasterscript)
	Citizen.Trace("Starting Done")
end)


function sit(object)

	local ped = PlayerPedId()
	lastPos = GetOffsetFromEntityInWorldCoords(PlayerPedId(), 0.0, 0.0, -1.0)
	currentSitObj = object
	FreezeEntityPosition(object, true)
	local objinfo = {}
	for k,v in pairs(Config.Sitable) do
		if tostring(GetHashKey(v.prop)) == tostring(GetEntityModel(object)) then
			objinfo = v
		end
	end
	local objloc = GetEntityCoords(object)

	sitting = true

	TaskStartScenarioAtPosition(ped, objinfo.scenario, objloc.x, objloc.y, objloc.z+(1.0+objinfo.verticalOffset), GetEntityHeading(object)+180.0, 0, true, true)

	local ped = PlayerPedId()
	while sitting do
		AttachEntityToEntity(ped, object, 20, 0.0, 0.0, 1.0+objinfo.verticalOffset, 0.0, 0.0, 180.0, false, false, false, false, 1, true)

		Citizen.Wait(0)
	end
	ClearPedTasks(ped)
	Citizen.Wait(1400)
	SetEntityCoords(ped,lastPos)
end
--AttachEntityToEntity(entity1, entity2, boneIndex, x, y, z, xRot, yRot, zRot, p9, useSoftPinning, collision, isPed, vertexIndex, fixedRot)
--AttachEntityToEntity(entity1, entity2, boneIndex, x, y, z, xRot, yRot, zRot, p9, isRel, ignoreUpVec, allowRotation, unk, p14)

RegisterNetEvent("turnoffsitting")
AddEventHandler("turnoffsitting", function()
	sitting = false
end)



